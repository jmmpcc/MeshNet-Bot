# === Nodo Meshtastic ===
MESHTASTIC_HOST= IP DE TU NODO MESH
MESH_NODE_HOST= IP DE TU NODO MESH 

BROKER_PORT=8765
BACKLOG_PORT=8766

# Opcional: por si quieres overridear por entorno en vez de usar defaults del YAML
BROKER_HOST=127.0.0.1
BROKER_PORT=8765
BROKER_CTRL_HOST=127.0.0.1
BROKER_CTRL_PORT=8766

# Muy recomendable mantenerlo a 1 en Docker (evita doble sesión TCP al nodo)
DISABLE_BOT_TCP=1
NOTIFY_DONE=1 # No mostramos las notificaciones de tareas ejecutadas
NOTIFY_DONE_TTL=600 #antirebote


APRS_MAX_LEN=67
APRS_GATE_ECHO=1       #1 sólo APRS cuando /diario ambos | 0 desactiva y envia a APRS Y MESH

# === Telegram ===
TELEGRAM_TOKEN= ID DE TU CHAT BOT
ADMIN_IDS= TU ID DE TELEGRAM

# === APRS ===
APRS_CALL=XXXXX-11
KISS_HOST=host.docker.internal
KISS_PORT=8100
MESHTASTIC_CH=0
BOT_START_DELAY=90

# =========================
# Pasarela entre dos nodos
# =========================
# Nodo A (normalmente el que ya usas en MESHTASTIC_HOST)
A_HOST=${MESHTASTIC_HOST}
A_PORT=4403

# Nodo B (el segundo nodo, con preset distinto)
B_HOST= IP DE TU SEGUNDO NODO NESH
B_PORT=4403

# Mapeo de canales (A→B y B→A).
# Si ambos nodos usan los mismos canales, deja "espejo" 0:0,1:1,2:2
A2B_CH_MAP=0:0,1:1,2:2,3:3,4:4,5:5
B2A_CH_MAP=0:0,1:1,2:2,3:3,4:4,5:5

# Qué reenviar
FORWARD_TEXT=1
FORWARD_POSITION=0    # 1 si quieres cruzar posiciones/telemetría (como resumen de texto)
REQUIRE_ACK=0         # 1 si quieres pedir ACK en envíos (solo tiene sentido en unicast)

# Anti-ruido
RATE_LIMIT_PER_SIDE=8 # máx. mensajes/minuto por sentido
DEDUP_TTL=45          # segundos de ventana antidupe

# Marcado opcional (vacío para no marcar)
TAG_BRIDGE=[BRIDGE]
# Etiquetas específicas por dirección (opcionales)
TAG_BRIDGE_A2B=[BRIDGE A→B]
TAG_BRIDGE_B2A=[BRIDGE B→A]

# =========================
# Bridge embebido en el broker (opcional)
# =========================
BRIDGE_ENABLED=1              # 1=activar dentro del broker, 0=desactivar
BRIDGE_B_HOST=${B_HOST}       # Nodo B (ya lo tienes definido)
BRIDGE_B_PORT=${B_PORT}

# Mapeo de canales (usa los mismos si quieres espejo)
BRIDGE_A2B_CH_MAP=${A2B_CH_MAP}
BRIDGE_B2A_CH_MAP=${B2A_CH_MAP}

# Qué reenviar
BRIDGE_FORWARD_TEXT=${FORWARD_TEXT}
BRIDGE_FORWARD_POSITION=${FORWARD_POSITION}
BRIDGE_REQUIRE_ACK=${REQUIRE_ACK}

# Anti-ruido
BRIDGE_RATE_LIMIT_PER_SIDE=${RATE_LIMIT_PER_SIDE}
BRIDGE_DEDUP_TTL=${DEDUP_TTL}

# Etiquetas
TAG_BRIDGE=${TAG_BRIDGE}
TAG_BRIDGE_A2B=${TAG_BRIDGE_A2B}
TAG_BRIDGE_B2A=${TAG_BRIDGE_B2A}

