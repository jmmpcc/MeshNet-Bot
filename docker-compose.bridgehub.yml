services:
  bridgehub-bc:
    # Igual que el resto del stack: usar imagen GHCR (sin build local).
    image: ghcr.io/jmmpcc/meshnet-bot-bridge-bc:latest
    container_name: meshnet-bridge-bc
    restart: unless-stopped

    # Este servicio usa SU propio .env (no el global)
    env_file:
      - .env-triple-bridge

    # Clave: compartir el namespace de red del broker AUNQUE sea un compose separado.
    # As√≠, BROKER_CTRL_HOST=127.0.0.1 funciona (igual que bot/aprs).
    network_mode: "container:meshnet-broker"

    # Persistencia (si el bridge escribe logs/estado; no rompe nada si no lo usa)
    volumes:
      - ./bot_data:/app/bot_data:rw

    stop_grace_period: 10s